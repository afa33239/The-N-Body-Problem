WHY LEAPFROG WORKS 

1. Acceleration depends only on position
In Newtonian gravity, acceleration is determined only by where bodies are located.
Velocity does not affect the force.
This makes the system predictable in a special way: forces change smoothly as position changes.

2. Hamiltonian system
A Hamiltonian system is any physical system where total energy is split into two parts:
kinetic energy (from velocity) and potential energy (from position).
Gravity is one of these systems.
Hamiltonian systems have a built in geometric structure that describes how energy flows over time.

3. Time symmetry
The true physics of orbits is time reversible.
If you run the world forward for some time, then reverse all velocities and run backward, you return to the starting point.
Leapfrog follows this same time symmetry.
This prevents errors from piling up in one direction.

4. Symplectic integrator
A symplectic integrator is a numerical method that preserves the geometric structure of a Hamiltonian system.
Practically, this means it keeps the total energy from drifting over time.
Leapfrog is symplectic.
Euler and even RK4 are not.

5. Second order accuracy
Second order means the error per timestep is proportional to dt squared.
This is much more accurate than Euler, which is first order (error proportional to dt).
Leapfrog matches the real motion up to the second term of the Taylor expansion of motion.

6. Taylor expansion explained simply
A Taylor expansion is a way to approximate a function using its value, its slope, and its curvature.
For motion, this means:
position changes because of velocity and acceleration.
Leapfrog reproduces the first two terms of this expansion exactly, up to dt squared accuracy.

7. Why using the midpoint velocity works
Velocity changes during the timestep because of acceleration.
The best single estimate of the average velocity over the whole step is the velocity at the middle of the step.
Leapfrog computes this midpoint velocity automatically.
Using this midpoint velocity gives the correct full position update.

8.Why position is updated once, but velocity is updated in two halves
Velocity is the quantity directly affected by acceleration.
Because acceleration changes during the timestep, the velocity update must be split into two symmetric halves (half at the start, half at the end).
Position only depends on the average velocity, so a single update using the midpoint velocity is enough.
If you split the position step, you break the symmetry and lose stability.

9. What this achieves
Energy stays nearly constant.
Orbits remain stable even for long simulations.
Errors do not build up over time, they cancel out.
Leapfrog behaves like true physics when Euler and other methods drift